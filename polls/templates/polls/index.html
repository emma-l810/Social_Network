<!-- Welcome to the index.html in templates/polls. -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>SocialNetwork</title>

    <!-- BOOTSTRAP UPLOADS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


  </head>
  <body style="background-color: #FFE2F0">
  <div class="container-fluid pt-20">
    <!-- random intro blurb -->
    <h1>The Social Network</h1>
    <h3>Your safe space to post real life instead of fake media.</h3>
    <p>social social social social social social social every day</p>
    <br>

    <!-- only displays if the user is logged in -->
    {% if loggedIn %}
      <h3>Hello, {{ user.username }}!</h3>

      <!-- outputs of Posts and Comments -->
      <h4>Posts</h4>
      <!-- loops through and displays each post + corresponding comments -->
      <ul>
        {% for post in alldata %}
          <p>{{post.text}} <br> {{post.likes}} likes</p>

          <ul>
          <!-- loops through each comment of each post to display corresponding subcomments -->
          {% for comment in post.comments %}
            <p> {{comment.text}} <br> {{comment.likes}} likes </p>

            <ul>
              <!-- loops for subcomments -->
              {% for subcomment in comment.subcomments %}
                <p> {{subcomment.text}} <br> {{subcomment.likes}} likes </p>
              {% endfor %}
            </ul>

          {% endfor %}
        </ul>

        <!-- note: text is attribute of post -->
        <br>
        {% endfor %}
      </ul>
      <br>

      <!-- logout form - requires hidden element to send the form -->
      <form action="http://127.0.0.1:8000/" method="post">
        {% csrf_token %}
        <input type="hidden" name="logout" value="logout">
        <button type="submit">Logout</button>
      </form>

    <!-- if user is not logged in, allow them to log in -->
    {% else %}
      <!-- login form -->
      <form action="http://127.0.0.1:8000/" method="post">
        <h4>Login</h4>
        {% csrf_token %}

        <!-- username input -->
        <label for="inputUsername">Username</label>
        <input type="text" name="inputUsername" id="inputUsername">

        <!-- password input -->
        <label for="inputPassword">Password</label>
        <input type="password" name="inputPassword" id="inputPassword">

        <br><br>
        <button type="submit">LOGIN</button>
      </form>

    {% endif %}

  </div>
  </body>
</html>

<!-- migrate, then go to the admin side and add some data -->
